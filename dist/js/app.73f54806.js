(function(t){function e(e){for(var a,r,o=e[0],c=e[1],s=e[2],d=0,l=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);f&&f(e);while(l.length)l.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],a=!0,r=1;r<n.length;r++){var o=n[r];0!==i[o]&&(a=!1)}a&&(u.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},i={app:0},u=[];function o(t){return c.p+"js/"+({about:"about",sheet:"sheet"}[t]||t)+"."+{about:"c35af6a5",sheet:"91184ed6"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={about:1,sheet:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({about:"about",sheet:"sheet"}[t]||t)+"."+{about:"0ef2d7e3",sheet:"eeddef31"}[t]+".css",i=c.p+a,u=document.getElementsByTagName("link"),o=0;o<u.length;o++){var s=u[o],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===a||d===i))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],d=s.getAttribute("data-href");if(d===a||d===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,u=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=a,delete r[t],f.parentNode.removeChild(f),n(u)},f.href=i;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var u=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=u);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(t);var l=new Error;s=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}i[t]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var f=d;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0613":function(t,e,n){"use strict";var a=n("5502"),r=(n("7db0"),n("c740"),n("d81d"),n("a434"),n("bc3a")),i=n.n(r),u=(n("a15b"),n("ac1f"),n("1276"),n("3835")),o=n("d4ec"),c=n("bee2"),s=n("bd8e");function d(t){return Object(s["a"])(t).millisecond(0).second(0).minute(0).hour(0).valueOf()}function l(t){var e=parseInt(t,10),n=Math.floor(e/100),a=e%100;return 60*(60*n+a)*1e3}var f=function(){function t(e){Object(o["a"])(this,t),this._id=e._id,this.copy(e)}return Object(c["a"])(t,[{key:"copy",value:function(t){return this.start=t.start,this.end=t.end,this.text=t.text,this.type=t.type,this}},{key:"clone",value:function(){return new t(this)}},{key:"getId",value:function(){return this._id}},{key:"getData",value:function(){return{start:this.start,end:this.end,text:this.text,type:this.type}}},{key:"setStart",value:function(t){return this.start=t,this}},{key:"setEnd",value:function(t){return this.end=t,this}},{key:"setText",value:function(t){return this.text=t,this}},{key:"setType",value:function(t){return this.type=t,this}},{key:"getDate",value:function(t){return Object(s["a"])(this.start).format(t)}},{key:"getFormattedDate",value:function(){return Object(s["a"])(this.start).format("YYYY-MM-DD")}},{key:"changeDate",value:function(t){var e=Object(s["a"])(t).valueOf();if(!e)throw new Error("Invalid Date: "+t);var n=Math.abs(this.start-d(this.start)),a=Math.abs(this.end-d(this.end));return console.log("startTime:",n/1e3/60),console.log("  endTime:",a/1e3/60),this.setStart(e+n),this.setEnd(e+a),this}},{key:"getFormattedTime",value:function(){return[Object(s["a"])(this.start).format("HHmm"),Object(s["a"])(this.end).format("HHmm")].join("-")}},{key:"changeTime",value:function(t){if(!/^\d{4}-\d{4}$/.test(t))throw new Error("Invalid Time: "+t);var e=t.split("-"),n=Object(u["a"])(e,2),a=n[0],r=n[1],i=d(this.start),o=d(this.end);return this.setStart(i+l(a)),this.setEnd(o+l(r)),this}}]),t}(),b={state:{list:[]},mutations:{addTask:function(t,e){t.list.push(new f(e))},editTask:function(t,e){var n=e._id,a=t.list.find((function(t){return t._id===n}));a&&a.copy(e)},removeTask:function(t,e){var n=e._id,a=t.list.findIndex((function(t){return t._id===n}));console.log("remove:",n,a),-1!==a&&t.list.splice(a,1)},setTasks:function(t,e){t.list=e.map((function(t){return new f(t)}))}},actions:{addTask:function(t,e){var n=t.commit;return i.a.post("/api/tasks",e).then((function(t){n("addTask",t.data)}))},editTask:function(t,e){var n=t.commit;return i.a.put("/api/tasks/".concat(e.getId()),e.getData()).then((function(t){n("editTask",t.data)}))},removeTask:function(t,e){var n=t.commit;return i.a.delete("/api/tasks/".concat(e.getId())).then((function(t){n("removeTask",t.data)}))},loadTasks:function(t){var e=t.commit;return i.a.get("/api/tasks?lastDays=31").then((function(t){e("setTasks",t.data)}))}}},p={};e["a"]=Object(a["a"])({state:p,mutations:{},actions:{},modules:{task:b}})},"0d84":function(t,e,n){"use strict";n("8277")},"11e0":function(t,e,n){"use strict";n("1b09")},"1b09":function(t,e,n){},8277:function(t,e,n){},"96ce":function(t,e,n){},b0fa:function(t,e,n){"use strict";n("96ce")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r={id:"nav"},i=Object(a["f"])("Home"),u=Object(a["f"])(" | "),o=Object(a["f"])("Sheet"),c=Object(a["f"])(" | "),s=Object(a["f"])("Debug");function d(t,e){var n=Object(a["w"])("router-link"),d=Object(a["w"])("router-view");return Object(a["p"])(),Object(a["d"])(a["a"],null,[Object(a["g"])("div",r,[Object(a["g"])(n,{to:"/"},{default:Object(a["C"])((function(){return[i]})),_:1}),u,Object(a["g"])(n,{to:"/sheet"},{default:Object(a["C"])((function(){return[o]})),_:1}),c,Object(a["g"])(n,{to:"/debug"},{default:Object(a["C"])((function(){return[s]})),_:1})]),Object(a["g"])(d)],64)}n("b0fa");const l={};l.render=d;var f=l,b=(n("d3b7"),n("6c02")),p={class:"task"},h=Object(a["g"])("hr",null,null,-1);function m(t,e,n,r,i,u){var o=Object(a["w"])("TaskList"),c=Object(a["w"])("AddTaskForm");return Object(a["p"])(),Object(a["d"])("div",p,[Object(a["g"])(o),h,Object(a["g"])(c)])}var v=Object(a["E"])("data-v-601c4c9b");Object(a["s"])("data-v-601c4c9b");var O={class:"task-list"};Object(a["q"])();var j=v((function(t,e,n,r,i,u){var o=Object(a["w"])("TaskListItem");return Object(a["p"])(),Object(a["d"])("div",O,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(t.sortedList,(function(t){return Object(a["p"])(),Object(a["d"])("div",{key:t._id},[Object(a["g"])(o,{task:t},null,8,["task"])])})),128))])})),g=(n("d81d"),n("0613")),k=Object(a["E"])("data-v-4f51e89e");Object(a["s"])("data-v-4f51e89e");var y={class:"week-day"},T={class:"date"},w={class:"time"},D={class:"text"},x={class:"type"};Object(a["q"])();var _=k((function(t,e,n,r,i,u){return Object(a["p"])(),Object(a["d"])("div",null,[Object(a["g"])("label",y,[Object(a["g"])("input",{disabled:"",class:t.fullWeekDay,value:t.weekDay},null,10,["value"])]),Object(a["g"])("label",T,[Object(a["D"])(Object(a["g"])("input",{maxlength:"10","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.date=e}),disabled:t.updating,onFocus:e[2]||(e[2]=function(e){return t.onFocus()}),onBlur:e[3]||(e[3]=function(e){return t.onBlur()})},null,40,["disabled"]),[[a["A"],t.date,void 0,{lazy:!0,trim:!0}]])]),Object(a["g"])("label",w,[Object(a["D"])(Object(a["g"])("input",{maxlength:"9","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.time=e}),disabled:t.updating,onFocus:e[5]||(e[5]=function(e){return t.onFocus()}),onBlur:e[6]||(e[6]=function(e){return t.onBlur()})},null,40,["disabled"]),[[a["A"],t.time,void 0,{lazy:!0,trim:!0}]])]),Object(a["g"])("label",D,[Object(a["D"])(Object(a["g"])("input",{"onUpdate:modelValue":e[7]||(e[7]=function(e){return t.text=e}),disabled:t.updating,onFocus:e[8]||(e[8]=function(e){return t.onFocus()}),onBlur:e[9]||(e[9]=function(e){return t.onBlur()})},null,40,["disabled"]),[[a["A"],t.text,void 0,{lazy:!0,trim:!0}]])]),Object(a["g"])("label",x,[Object(a["D"])(Object(a["g"])("input",{"onUpdate:modelValue":e[10]||(e[10]=function(e){return t.type=e}),disabled:t.updating,onFocus:e[11]||(e[11]=function(e){return t.onFocus()}),onBlur:e[12]||(e[12]=function(e){return t.onBlur()})},null,40,["disabled"]),[[a["A"],t.type,void 0,{lazy:!0,trim:!0}]])]),Object(a["g"])("button",{title:"Remove this entry.",onClick:e[13]||(e[13]=function(){return t.remove&&t.remove.apply(t,arguments)})},"✖")])})),F=Object(a["h"])({name:"TaskListItem",props:["task"],data:function(){return{focus:!1,updating:!1}},computed:{weekDay:function(){return this.task.getDate("ddd")},fullWeekDay:function(){return this.task.getDate("dddd").toLowerCase()},date:{get:function(){return this.task.getFormattedDate()},set:function(t){this.task.changeDate(t)}},time:{get:function(){return this.task.getFormattedTime()},set:function(t){this.task.changeTime(t)}},text:{get:function(){return this.task.text},set:function(t){this.task.setText(t)}},type:{get:function(){return this.task.type},set:function(t){this.task.setType(t)}}},methods:{onFocus:function(){this.focus=!0},onBlur:function(){var t=this;this.focus=!1,setTimeout((function(){t.focus||t.update()}))},update:function(){var t=this;this.updating=!0,g["a"].dispatch("editTask",this.task).finally((function(){t.updating=!1}))},remove:function(){g["a"].dispatch("removeTask",this.task)}}});n("11e0");F.render=_,F.__scopeId="data-v-4f51e89e";var A=F,E=Object(a["h"])({name:"AddTaskForm",components:{TaskListItem:A},computed:{sortedList:function(){return g["a"].state.task.list.map((function(t){return t})).sort((function(t,e){return t.start-e.start}))}},created:function(){g["a"].dispatch("loadTasks")}});E.render=j,E.__scopeId="data-v-601c4c9b";var I=E,S=Object(a["E"])("data-v-6d54b7ff");Object(a["s"])("data-v-6d54b7ff");var C={class:"date"},L=Object(a["g"])("span",null,"Date: ",-1),P={class:"time"},B=Object(a["g"])("span",null," Time: ",-1),M={class:"text"},N=Object(a["g"])("span",null," Text: ",-1),H={class:"type"},U=Object(a["g"])("span",null," Type: ",-1),V=Object(a["g"])("span",null," ",-1);Object(a["q"])();var Y=S((function(t,e,n,r,i,u){return Object(a["p"])(),Object(a["d"])("div",null,[Object(a["g"])("label",C,[L,Object(a["D"])(Object(a["g"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.input.date=e}),disabled:t.updating},null,8,["disabled"]),[[a["A"],t.input.date,void 0,{trim:!0}]])]),Object(a["g"])("label",P,[B,Object(a["D"])(Object(a["g"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.input.time=e}),disabled:t.updating},null,8,["disabled"]),[[a["A"],t.input.time,void 0,{trim:!0}]])]),Object(a["g"])("label",M,[N,Object(a["D"])(Object(a["g"])("input",{"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.input.text=e}),disabled:t.updating},null,8,["disabled"]),[[a["A"],t.input.text,void 0,{trim:!0}]])]),Object(a["g"])("label",H,[U,Object(a["D"])(Object(a["g"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.input.type=e}),disabled:t.updating},null,8,["disabled"]),[[a["A"],t.input.type,void 0,{trim:!0}]])]),V,Object(a["g"])("button",{onClick:e[5]||(e[5]=function(){return t.addNewTask&&t.addNewTask.apply(t,arguments)}),disabled:!t.valid},"➕",8,["disabled"])])})),q=(n("99af"),n("ac1f"),n("1276"),n("3835")),z=n("bd8e");function $(){return Object(z["a"])().format("YYYY-MM-DD")}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="HHmm",n=Object(z["a"])().startOf("h"),a=n.add(t,"h");return"".concat(n.format(e),"-").concat(a.format(e))}var W=Object(a["h"])({name:"AddTaskForm",data:function(){return{updating:!1,input:{date:$(),time:J(),text:"",type:""}}},computed:{valid:function(){var t=/^\d{4}-\d{2}-\d{2}$/.test(this.input.date),e=/^\d{4}-\d{4}$/.test(this.input.time),n=""!==this.input.text;return t&&e&&n}},methods:{addNewTask:function(){var t=this.input.time.split("-"),e=Object(q["a"])(t,2),n=e[0],a=e[1],r=Object(z["a"])("".concat(this.input.date," ").concat(n)),i=Object(z["a"])("".concat(this.input.date," ").concat(a));g["a"].dispatch("addTask",{start:r.valueOf(),end:i.valueOf(),text:this.input.text,type:this.input.type})}}});n("0d84");W.render=Y,W.__scopeId="data-v-6d54b7ff";var K=W,R=Object(a["h"])({name:"Home",components:{TaskList:I,AddTaskForm:K}});R.render=m;var G=R,Q=Object(a["E"])("data-v-8cea5834");Object(a["s"])("data-v-8cea5834");var X=Object(a["g"])("pre",null,"404 - Page Not Found",-1);Object(a["q"])();var Z=Q((function(t,e,n,r,i,u){return Object(a["p"])(),Object(a["d"])("div",null,[X])})),tt=Object(a["h"])({name:"PageNotFound"});tt.render=Z,tt.__scopeId="data-v-8cea5834";var et=tt,nt=[{path:"/",name:"Home",component:G},{path:"/debug",name:"Debug",component:function(){return n.e("about").then(n.bind(null,"e94b"))}},{path:"/sheet",name:"Sheet",component:function(){return n.e("sheet").then(n.bind(null,"4448"))}},{path:"/:pathMatch(.*)*",name:"PageNotFound",component:et}],at=Object(b["a"])({history:Object(b["b"])("/"),routes:nt}),rt=at,it=n("f906"),ut=n.n(it);z["a"].extend(ut.a),Object(a["c"])(f).use(g["a"]).use(rt).mount("#app")}});
//# sourceMappingURL=app.73f54806.js.map